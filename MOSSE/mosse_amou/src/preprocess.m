<<<<<<< HEAD
%è®ºæ–‡ä¸­æåˆ°,FFTå·ç§¯ç®—æ³•çš„ä¸€ä¸ªé—®é¢˜æ˜¯å›¾åƒå’Œæ»¤æ³¢å™¨è¢«æ˜ å°„åˆ°çŽ¯é¢çš„æ‹“æ‰‘ç»“æž„,äººä¸ºçš„è¿žæŽ¥å›¾åƒçš„è¾¹ç•Œå¼•å…¥å½±å“ç›¸å…³è¾“å‡ºçš„ä¼ªåƒ.
%ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜,è¿›è¡Œæ•°æ®é¢„å¤„ç†.
%æ³¨:è¦è¿›è¡ŒåŠ çª—æ“ä½œä¸€èˆ¬åœ¨æ—¶åŸŸä¸­è¿›è¡Œ,å› ä¸ºåœ¨æ—¶åŸŸä¸­æ˜¯ç‚¹ä¹˜æ“ä½œ,åœ¨é¢‘åŸŸä¸­æ˜¯å·ç§¯æ“ä½œ.å› æ­¤åŠ çª—æ“ä½œæ˜¯åœ¨å‚…é‡Œå¶å˜æ¢ä¹‹å‰
function img = preprocess(img)
[r,c] = size(img);%r=height(row),c=width(column)
win = window2(r,c,@hann);%ç”Ÿæˆå³å°†åŠ åˆ°æ•°å­—ä¿¡å·ä¸Šçš„æ±‰å®çª—
% eps = 1e-5;%åŠ å…¥å™ªå£°,å¢žå¼ºæ¨¡åž‹é²æ£’æ€§
% img = double(img) / 255;
% 		
% img = img - mean(img(:));
img = log(double(img)+1);%è®ºæ–‡ä¸­æå‡º,ä½¿ç”¨å¯¹æ•°å‡½æ•°æ”¹å˜åƒç´ å€¼,æœ‰åŠ©äºŽä½Žå¯¹æ¯”åº¦çš„ç…§æ˜Žæƒ…å†µ
img = (img-mean(img(:)))/(std(img(:))+eps);%å°†åƒç´ å½’ä¸€åŒ–ä¸ºå¹³å‡å€¼ä¸º0çš„å€¼.(è®ºæ–‡ä¸­æåˆ°å°†æ•°æ®å¤„ç†ä¸ºå¹³å‡å€¼ä¸º0,æ–¹å·®ä¸º1çš„å€¼)
%img(img<0)=0;%å°†çŸ©é˜µä¸­è´Ÿå€¼æ›¿æ¢ä¸º0,åŽç»­ä¸åŠ çª—,ä¼šå‡ºçŽ°è·Ÿè¸ªå¤±è´¥æƒ…å†µ.
img = img.*win;%æ•°æ®åŠ æ¡†.è®ºæ–‡ä¸­æåˆ°è¿‡å›¾åƒä¹˜ä»¥ä½™å¼¦çª—å£(æ±‰å®çª—å°±æ˜¯ä½™å¼¦çª—)
                %å¥‡æ€ªçš„æ˜¯æ­¤ä»£ç åŠ çª—åŽè·Ÿè¸ªæ•ˆæžœåè€Œæ›´å·®,é€šè¿‡è¾“å‡ºåŠ çª—å‰åŽç‰¹å¾å›¾å¯¹æ¯”å¯ä»¥çœ‹åˆ°,åŠ çª—æ“ä½œé€ æˆäº†è®¸å¤šç‰¹å¾ä¿¡æ¯ä¸¢å¤±.
                %è§£é‡Š:å…¶å®žå¹¶ä¸æ˜¯åŠ çª—åŽè·Ÿè¸ªæ•ˆæžœå˜å·®,åŠ çª—æ“ä½œå°±æ˜¯çªå‡ºè£å‰ªå›¾çš„ä¸­å¿ƒä½ç½®,å‡å¼±è¾¹ç¼˜ä½ç½®,å› æ­¤åŠ çª—åŽè·Ÿè¸ªå™¨å°±å°†å…³æ³¨ç‚¹æ”¾åœ¨äº†è£å‰ªå›¾çš„ä¸­å¿ƒ,è€Œä¸æ˜¯æ•´ä¸ª
                % è£å‰ªå›¾,ä½†æ˜¯å½“æˆ‘ä»¬è£å‰ªæ•´ä¸ªç‰©ä½“æ—¶å°±ä¼šå‘çŽ°,è·Ÿè¸ªå™¨åªè·Ÿè¸ªç‰©ä½“ä¸­å¿ƒä½ç½®,è¿™å°±é€ æˆäº†è¯¯ä»¥ä¸ºè·Ÿè¸ªæ•ˆæžœå·®çš„åŽŸå›    
=======
%ÂÛÎÄÖÐÌáµ½,FFT¾í»ýËã·¨µÄÒ»¸öÎÊÌâÊÇÍ¼ÏñºÍÂË²¨Æ÷±»Ó³Éäµ½»·ÃæµÄÍØÆË½á¹¹,ÈËÎªµÄÁ¬½ÓÍ¼ÏñµÄ±ß½çÒýÈëÓ°ÏìÏà¹ØÊä³öµÄÎ±Ïñ.
%ÎªÁË½â¾öÉÏÊöÎÊÌâ,½øÐÐÊý¾ÝÔ¤´¦Àí.
%×¢:Òª½øÐÐ¼Ó´°²Ù×÷Ò»°ãÔÚÊ±ÓòÖÐ½øÐÐ,ÒòÎªÔÚÊ±ÓòÖÐÊÇµã³Ë²Ù×÷,ÔÚÆµÓòÖÐÊÇ¾í»ý²Ù×÷.Òò´Ë¼Ó´°²Ù×÷ÊÇÔÚ¸µÀïÒ¶±ä»»Ö®Ç°
function img = preprocess(img)
[r,c] = size(img);%r=height(row),c=width(column)
win = window2(r,c,@hann);%Éú³É¼´½«¼Óµ½Êý×ÖÐÅºÅÉÏµÄººÄþ´°
% eps = 1e-5;%¼ÓÈëÔëÉù,ÔöÇ¿Ä£ÐÍÂ³°ôÐÔ
% img = double(img) / 255;
% 		
% img = img - mean(img(:));
img = log(double(img)+1);%ÂÛÎÄÖÐÌá³ö,Ê¹ÓÃ¶ÔÊýº¯Êý¸Ä±äÏñËØÖµ,ÓÐÖúÓÚµÍ¶Ô±È¶ÈµÄÕÕÃ÷Çé¿ö
img = (img-mean(img(:)))/(std(img(:))+eps);%½«ÏñËØ¹éÒ»»¯ÎªÆ½¾ùÖµÎª0µÄÖµ.(ÂÛÎÄÖÐÌáµ½½«Êý¾Ý´¦ÀíÎªÆ½¾ùÖµÎª0,·½²îÎª1µÄÖµ)
%img(img<0)=0;%½«¾ØÕóÖÐ¸ºÖµÌæ»»Îª0,ºóÐø²»¼Ó´°,»á³öÏÖ¸ú×ÙÊ§°ÜÇé¿ö.
img = img.*win;%Êý¾Ý¼Ó¿ò.ÂÛÎÄÖÐÌáµ½¹ýÍ¼Ïñ³ËÒÔÓàÏÒ´°¿Ú(ººÄþ´°¾ÍÊÇÓàÏÒ´°)
                %Ææ¹ÖµÄÊÇ´Ë´úÂë¼Ó´°ºó¸ú×ÙÐ§¹û·´¶ø¸ü²î,Í¨¹ýÊä³ö¼Ó´°Ç°ºóÌØÕ÷Í¼¶Ô±È¿ÉÒÔ¿´µ½,¼Ó´°²Ù×÷Ôì³ÉÁËÐí¶àÌØÕ÷ÐÅÏ¢¶ªÊ§.
                %½âÊÍ:ÆäÊµ²¢²»ÊÇ¼Ó´°ºó¸ú×ÙÐ§¹û±ä²î,¼Ó´°²Ù×÷¾ÍÊÇÍ»³ö²Ã¼ôÍ¼µÄÖÐÐÄÎ»ÖÃ,¼õÈõ±ßÔµÎ»ÖÃ,Òò´Ë¼Ó´°ºó¸ú×ÙÆ÷¾Í½«¹Ø×¢µã·ÅÔÚÁË²Ã¼ôÍ¼µÄÖÐÐÄ,¶ø²»ÊÇÕû¸ö
                % ²Ã¼ôÍ¼,µ«ÊÇµ±ÎÒÃÇ²Ã¼ôÕû¸öÎïÌåÊ±¾Í»á·¢ÏÖ,¸ú×ÙÆ÷Ö»¸ú×ÙÎïÌåÖÐÐÄÎ»ÖÃ,Õâ¾ÍÔì³ÉÁËÎóÒÔÎª¸ú×ÙÐ§¹û²îµÄÔ­Òò   
>>>>>>> NOSSE
end
